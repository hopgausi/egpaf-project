{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% block content %}
<div class="container">
    <a href="{% url 'patient' %}">Back Home</a>
    <a href="{% url 'patients' %}">View Patients</a>
    <div class="mt-3 mb-3 text-center">
        <h2>Full Patient Details</h2>
        <div class="row">
            <div class="col-md-8 mx-auto">
        
                <div class="card shadow-md">
                    <div class="card-body text-left">                    
                            <p class="card-text">Name: <span class="font-italic text-black-50">{{ patient.first_name}} {{ patient.last_name}}</span></p>
                            <p class="card-text">Gender: <span class="font-italic text-black-50">{{ patient.gender}}</span></p>
                            <p class="card-text">Birthday: <span class="font-italic text-black-50">{{patient.birthdate}}</span></p>
                            <p class="card-text">Current Address: <span class="font-italic text-black-50">{{ patient.district}}, {{ patient.village}}</span></p>
                            <p class="card-text">Occupation: <span class="font-italic text-black-50">{{ patient.occupation}}</span></p>                             
                    
                    {% if patient.assessment_set.first %}
                    <h1>Recent Assessment</h1>
             
                        <p class="card-text">Diagnosis: <span class="font-italic text-black-50">{{ patient.assessment_set.first.diagnosis}}</span></p>
                        <p class="card-text">Visit Date: <span class="font-italic text-black-50">{{ patient.assessment_set.first.visit_date}}</span></p>
                        <p class="card-text">Weight: <span class="font-italic text-black-50">{{patient.assessment_set.first.weight}} kgs</span></p>
                        <p class="card-text">Height: <span class="font-italic text-black-50">{{ patient.assessment_set.first.height}} m</span></p>
                        <p class="card-text">Temperature: <span class="font-italic text-black-50">{{ patient.assessment_set.first.temperature}} C</span></p> 
                    {% endif %}
                    </div>
                </div>
                    <a href="{% url 'add_patient_data' patient.id %}" class="ml-3 mt-3 btn btn-primary">Add New Assessment</a>
                    <a href="{% url 'health_record' patient.id %}" class="ml-3 mt-3 btn btn-primary">View Patient Health History</a>
            </div>
        </div>
</div>

{% endblock content %}